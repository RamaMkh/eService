ALTER TABLE etrade.IndividualAuthorizationRequests
ADD  TemporaryRequestNumber VARCHAR(50) NULL;
Insert into SGCounter Values('TempIndividualAuthorization','IndividualAuthorizationRequests','TemporaryRequestNumber',null,247,null)



USE [MicroclearLight_July23]
GO
/****** Object:  StoredProcedure [etrade].[GetCommercialLic]    Script Date: 1/8/2024 3:13:33 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER procedure [etrade].[GetCommercialLic]
 
(@OrganizationId int,
@MociCommercialLicSubType NVARCHAR (20) = null
)    
AS
BEGIN
    SELECT 
        O.CommercialLicenseNo,
        MT.Description AS CommercialLicType,
        CASE 
            WHEN @MociCommercialLicSubType IS NOT NULL 
                THEN (SELECT Description FROM MOCITypes WHERE TypeId = @MociCommercialLicSubType)
            ELSE NULL
        END AS MOCICommercialLicType
    FROM 
        Organizations O
        LEFT JOIN MOCITypes MT ON MT.TypeId = O.CommercialLicenseSubType
    WHERE 
        O.OrganizationId = @OrganizationId;
END
